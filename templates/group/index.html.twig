{% extends 'base.html.twig' %}

{% block title %}{{ pagination.getTotalItemCount }} {{ type }} - Page {{ page }}{% endblock %}

{% block body %}

    <div class="count">
        {{ pagination.getTotalItemCount }} {{ type }}
    </div>

    <form method="get" class="form-inline my-2">
        <div class="input-group">
            <input type="text" name="search" id="search" class="form-control" placeholder="Filter" value="{{ search }}">
            <button type="submit" class="btn btn-primary">Search</button>
        </div>
    </form>

    {{ knp_pagination_render(pagination) }}

    <div style="column-count: 3">
        <ul class="list-group list-group-flush">
            {% for item in pagination %}
                {% set status = ((item.booksFinished/(item.bookCount+0.00001))*100)|round %}
                {% set class = status==100?'success':(status>0?'warning':'secondary') %}
                <li class="list-group-item list-group-item-{{ class }} p-0 border-1" >
                    {% set params = { (type): item.item } %}
                    <a href="{{ filter_book_url(params) }}" class="d-block p-3">
                    {{ item.item }}
                        <span class="badge bg-{{ class }} rounded-pill">{{ item.booksFinished }}/{{ item.bookCount }}</span>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>

    {{ knp_pagination_render(pagination) }}

{% endblock %}
